<!DOCTYPE html>
<html>
  <body data-bootstrap-json="{{.Bootstrap}}">
    <div id="root"></div>
  </body>
  <link rel="stylesheet" href="ui.css"/>
  <link rel="stylesheet" href="/font.css"/>
  <script src="ui.js"></script>
  <script>
    if (window.parent !== window) {
      window.__REACT_DEVTOOLS_GLOBAL_HOOK__ = window.parent.__REACT_DEVTOOLS_GLOBAL_HOOK__;
    }

    const methods = ['debug', 'log', 'warn', 'error', 'info', 'trace']
    methods.forEach(m => {
      const oldMethod = console[m]
      console[m] = function(...data) {
        oldMethod.apply(null, ["%c$ui  ", "color: #bada55"].concat(data))
      }
    })

    window.top.postMessage({type: "sendDark"}, "*")
    window.addEventListener('message', function(e) {
      if (e.data.type === "darkSetting") {
        if (e.data.dark) {
          document.documentElement.classList.add("dark")
        } else {
          document.documentElement.classList.remove("dark")
        }
      }
    }, false)

    window.addEventListener('keyup', (e) => {
      if (!e.shiftKey) return
      window.top.postMessage({type: "key", code: e.code}, "*")
    })
  </script>
</html>
